server:
  port: 8080

app:
  cors:
    allowed-origins:
      - "http://localhost:4200"
    allowed-methods:
      - GET
      - POST
      - PUT
      - PATCH
      - DELETE
      - OPTIONS
    allowed-headers:
      - Authorization
      - Content-Type
      - Accept
    exposed-headers:
      - Location
    allow-credentials: true
    max-age: 3600

spring:
  application:
    name: f1-driver-ranker-backend

  cache:
    type: caffeine
    caffeine:
      # Cache Spring (@Cacheable) - générique
      # (les caches jolpica.* utiliseront cette politique)
      spec: maximumSize=10_000,expireAfterWrite=1h

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: never

logging:
  level:
    root: INFO

provider:
  jolpica:
    base-url: "https://api.jolpi.ca/ergast/f1"

http:
  client:
    connect-timeout: 2s
    read-timeout: 5s

cache:
  drivers:
    # TTL métier pour le snapshot in-memory (sert aussi de fréquence de refresh)
    # Spring Boot accepte des Durations comme 24h, 12h, 30m, 10s, etc.
    ttl: 24h

warmup:
  executor:
    # Optionnel: warm-up async pour ne pas ralentir le startup
    core-pool-size: 1
    max-pool-size: 1
    thread-name-prefix: "warmup-"